<!DOCTYPE html>

<html>
<head>
    <title>Welcome to YABE</title>
    <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">
    <link rel="stylesheet" media="screen" href="@routes.Assets.at("bootstrap/css/bootstrap.min.css")">
    <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">
    <style>
        body {
            padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
        }
    </style>
</head>
<body>

<!--- Navigation --->
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
            <a class="brand" href="#">YABE!</a>
            <div class="nav-collapse">
                <ul class="nav">
                    <li class="active"><a href="#">Home</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#contact">Contact</a></li>

                   <!--
                    <li>
                        <form class="form-search">
                            <div class="input-append">
                                <input type="text" class="span2 search-query">
                                <button type="submit" class="btn">Search</button>
                            </div>
                        </form>
                    </li>
                    -->
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </div>
</div>
<!--- End navigation --->

<!--- Page body --->
<div id="page-container" class="container-fluid">
    <div class="row-fluid">
        <div id="sidebar" class="span3">
            <div class="well sidebar-nav">

            </div>
        </div>
        <div id="main-content" class="span9">
            <h1>Welcome to Yet Another Blog Engine!</h1>
            <button id="newPostBtn" type="button" class="btn btn-success">
                New Post
            </button>
            <div id="posts">

            </div>
        </div>
    </div>
</div>
<!--- End page body --->

<!--- Templates --->
<script type="text/template" id="sidebar-template">
    <h2 class="nav-header">Add a new category</h2>
    <input type="text" id="categoryName" class="span9" placeholder="Type category name..."/>
    <button type="button" id="addCategory" class="btn btn-primary span2">
        Add
    </button>

    <h2 class="nav-header">List of categories:</h2>

    <ul class="nav nav-list">
        <% _.each( categories, function( category ){ %>
        <li><a href="#category/<%=category.name%>">
            <%- category.name %>
        </a></li>
        <% }); %>
    </ul>
</script>

<script type="text/template" id="post-item-template">
    <div class="post">
        <a href="#post/<%= title %>" id="post"><h2><%= title %></h2></a>
        <%= datePosted %> <br>
        <%= content %> <br>
        <%= author.email %> <br>
        <%= category.name %> <br>
        <br>
        <%= tags %><br>
    </div>
</script>

<script type="text/template" id="post-template">
    <div class="form-left-col">
        <legend>Currently editing post <%= post.title %></legend>
        <label>Title:</label>
        <input type="text" id="title" name="title" value="<%= post.title %>" required />

        <label>Date posted:</label>
        <input type="text" id="datePosted" name="datePosted" value="<%= post.datePosted %>" required/>

        <label>Author:</label>
        <select id="author" name="author" required>
            <option value="">--select a author--</option>
            <% _(users).each(function(user) { %>
                <% if(post.author.email == user.email) { %>
                    <option value="<%= user.name %>" selected="true"><%= user.email %></option>
                <% } else { %>
                    <option value="<%= user.name %>"><%= user.email %></option>
                <% } %>
            <% }); %>
        </select>

        <label>Category:</label>
        <select id="category" name="category" required>
            <option value="">--select a category--</option>
            <% _(categories).each(function(category) { %>
                <% if(post.category.name == category.name) { %>
                    <option value="<%= category.name %>" selected="true"><%= category.name %></option>
                <% } else { %>
                    <option value="<%= category.name %>"><%= category.name %></option>
                <% } %>
            <% }); %>
        </select>

        <label>Tags:</label>

            <form class="navbar-search pull-right dropdown">
                <input id="searchTag" type="text" class="search-query dropdown-toggle" placeholder="Search" autocomplete="off">
            </form>
            <% _(post.tags).each(function(tag) { %>
            <span class="label label-info"><%= tag.name %></span>
            <% }); %>
        <label>Content:</label>
        <textarea id="content" name="content"><%= post.content %></textarea>
        <br>
        <button id="save" class="btn btn-success">Save</button>
        <button id="delete" class="btn btn-warning">Delete</button>
        <a href="#" id="cancel" class="btn btn-failure">Cancel</a>
    </div>
</script>

<script type="text/template" id="tag-item">
    <span class="label label-info"><%= name %></span>
</script>
<!--- End Templates --->

<!--- Imported at the bottom of the page so loading goes faster in browser -->
<script src="@routes.Assets.at("javascripts/lib/jquery-1.7.1.min.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("javascripts/lib/underscore-1.4.2-dev.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("javascripts/lib/backbone-0.9.2-dev.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("javascripts/models/categorymodel.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("javascripts/models/postmodel.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("javascripts/models/usermodel.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("javascripts/models/tagmodel.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("javascripts/views/post.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("javascripts/views/postlist.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("javascripts/views/tags.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("javascripts/views/categories.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("javascripts/app.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("bootstrap/js/bootstrap.min.js")" type="text/javascript"></script>
</body>
</html>